<div class="container py-5">
  <h2 class="mb-4 text-center">My Products</h2>
  <%= link_to 'Add Product', new_product_path,  class: 'btn btn-primary mb-4' %>

  <% if @products.any? %>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
      <% @products.each do |product| %>
        <div class="col">
          <div class="card h-100 shadow-sm border-0">
            <% if product.images.attached? %>
              <%= image_tag url_for(product.images.first), class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
            <% else %>

              <%= image_tag "placeholder.png", class: "card-img-top", style: "height: 200px; object-fit: cover;" %>
            <% end %>

            <div class="card-body">
              <h5 class="card-title"><%= product.name %></h5>
              <p class="card-text text-muted"><%= truncate(product.description, length: 70) %></p>
              <p class="card-text fw-bold"><%= number_to_currency(product.price) %></p>
              <p class="card-text"><small class="text-muted">Category: <%= product.category.titleize %></small></p>
              <p class="card-text"><small class="text-muted">Serial #: <%= product.serial_number %></small></p>
            </div>

            <div class="card-footer d-flex justify-content-between">
              <%= link_to 'Edit', edit_product_path(product), class: "btn btn-sm btn-outline-warning" %>
              <%= link_to 'Delete', product_path(product), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
            </div>  
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center">You have not added any products yet.</p>
  <% end %>
</div>
